<!DOCTYPE html>
<html>
<head>
  <title>MMO Chat</title>
</head>
<body>
  <h1>MMO Chat Client</h1>
  
  <input id="chatInput" placeholder="Type message..." />
  <button onclick="sendChat()">Send Chat</button>

  <pre id="log"></pre>

  <script>
    const ws = new WebSocket("ws://test-ixft.onrender.com/api/ping");
    const log = document.getElementById("log");

    ws.onmessage = (event) => {
      const data = JSON.parse(event.data);

      if (data.type === "welcome") {
        log.textContent += `\nWelcome! Your ID: ${data.id}`;
      }

      if (data.type === "chat") {
        log.textContent += `\nPlayer ${data.id}: ${data.text}`;
      }
    };

    function sendChat() {
      const text = document.getElementById("chatInput").value;
      ws.send(JSON.stringify({ type: "chat", text }));
      document.getElementById("chatInput").value = "";
    }
  </script>
</body>
</html>
